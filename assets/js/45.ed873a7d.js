(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{404:function(s,n,a){"use strict";a.r(n);var t=a(45),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"nginx的gzip配置参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx的gzip配置参数"}},[s._v("#")]),s._v(" Nginx的gzip配置参数")]),s._v(" "),a("p",[s._v("首先浏览器请求某个 URL 地址，并在请求的头 (head) 中设置属性 accept-encoding 值为 gzip, deflate，表明浏览器支持 gzip 和 deflate 这两种压缩方式;"),a("br"),s._v("\nWEB 服务器接收到请求后判断浏览器是否支持压缩，如果支持就传送压缩后的响应内容，否则传送不经过压缩的内容;浏览器获取响应内容后，判断内容是否被压缩，如果是则解压缩，然后显示响应页面的内容。"),a("br"),s._v("\n　　在实际的应用中我们发现压缩的比率往往在 3 到 10 倍，也就是本来 50k 大小的页面，采用压缩后实际传输的内容大小只有 5 至 15k 大小，这可以大大节省服务器的网络带宽，同时如果应用程序的响应足够快时，网站的速度瓶颈就转到了网络的传输速度上，因此内容压缩后就可以大大的提升页面的浏览速度。")]),s._v(" "),a("h4",{attrs:{id:"配置启用gzip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置启用gzip"}},[s._v("#")]),s._v(" 配置启用gzip")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v(" on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ngzip_min_length  5k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ngzip_buffers     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" 16k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#gzip_http_version 1.0;")]),s._v("\ngzip_comp_level "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ngzip_types       text/plain application/javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ngzip_vary on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# :wq保存退出，重新加载Nginx")]),s._v("\n\n/usr/local/nginx/sbin/nginx -s reload\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h4",{attrs:{id:"gzip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gzip"}},[s._v("#")]),s._v(" gzip")]),s._v(" "),a("p",[s._v("决定是否开启gzip模块\nparam:on|off\nexample:gzip on;")]),s._v(" "),a("h4",{attrs:{id:"gzip-buffers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gzip-buffers"}},[s._v("#")]),s._v(" gzip_buffers")]),s._v(" "),a("p",[s._v("设置gzip申请内存的大小,其作用是按块大小的倍数申请内存空间\nparam1:int\nparam2:int(k) 后面单位是k\nexample: gzip_buffers 4 8k;")]),s._v(" "),a("h4",{attrs:{id:"gzip-comp-level"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gzip-comp-level"}},[s._v("#")]),s._v(" gzip_comp_level")]),s._v(" "),a("p",[s._v("设置gzip压缩等级，等级越底压缩速度越快文件压缩比越小，反之速度越慢文件压缩比越大\nparam:1-9\nexample:gzip_com_level 1;")]),s._v(" "),a("h4",{attrs:{id:"gzip-min-length"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gzip-min-length"}},[s._v("#")]),s._v(" gzip_min_length")]),s._v(" "),a("p",[s._v("当返回内容大于此值时才会使用gzip进行压缩,以K为单位,当值为0时，所有页面都进行压缩\nparam:int\nexample:gzip_min_length 1000;")]),s._v(" "),a("h4",{attrs:{id:"gzip-http-version"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gzip-http-version"}},[s._v("#")]),s._v(" gzip_http_version")]),s._v(" "),a("p",[s._v("用于识别http协议的版本，早期的浏览器不支持gzip压缩，用户会看到乱码，所以为了支持前期版本加了此选项,目前此项基本可以忽略\nparam: 1.0|1.1\nexample:gzip_http_version 1.0")]),s._v(" "),a("h4",{attrs:{id:"gzip-proxied"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gzip-proxied"}},[s._v("#")]),s._v(" gzip_proxied")]),s._v(" "),a("p",[s._v("Nginx做为反向代理的时候启用，\nparam:off|expired|no-cache|no-sotre|private|no_last_modified|no_etag|auth|any]\nexpample:gzip_proxied no-cache;\noff – 关闭所有的代理结果数据压缩\nexpired – 启用压缩，如果header中包含”Expires”头信息\nno-cache – 启用压缩，如果header中包含”Cache-Control:no-cache”头信息\nno-store – 启用压缩，如果header中包含”Cache-Control:no-store”头信息\nprivate – 启用压缩，如果header中包含”Cache-Control:private”头信息\nno_last_modified – 启用压缩，如果header中包含”Last_Modified”头信息\nno_etag – 启用压缩，如果header中包含“ETag”头信息\nauth – 启用压缩，如果header中包含“Authorization”头信息\nany – 无条件压缩所有结果数据")]),s._v(" "),a("h4",{attrs:{id:"gzip-types"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gzip-types"}},[s._v("#")]),s._v(" gzip_types")]),s._v(" "),a("p",[s._v("设置需要压缩的MIME类型,非设置值不进行压缩\nparam:text/html|application/x-javascript|text/css|application/xml\nexample:gzip_types text/html;")]),s._v(" "),a("h4",{attrs:{id:"demo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#demo"}},[s._v("#")]),s._v(" Demo")]),s._v(" "),a("p",[s._v("gzip on;\ngzip_min_length 1000;\ngzip_buffers 4 8k;\ngzip_types text/html application/x-javascript text/css application/xml;")]),s._v(" "),a("h4",{attrs:{id:"使用curl测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用curl测试"}},[s._v("#")]),s._v(" 使用curl测试")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -I -H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Accept-Encoding: gzip, deflate"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://www.slyar.com/blog/"')]),s._v("\n\nHTTP/1.1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\nServer: nginx/1.0.15\nDate: Sun, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":13:09 GMT\nContent-Type: text/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("charset")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("UTF-8\nConnection: keep-alive\nX-Powered-By: PHP/5.2.17p1\nX-Pingback: http://www.slyar.com/blog/xmlrpc.php\nContent-Encoding: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v("\n\n页面成功压缩\n\n \n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -I -H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Accept-Encoding: gzip, deflate"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://www.slyar.com/blog/wp-content/plugins/photonic/include/css/photonic.css"')]),s._v("\n\nHTTP/1.1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\nServer: nginx/1.0.15\nDate: Sun, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":21:25 GMT\nContent-Type: text/css\nLast-Modified: Sun, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":17:07 GMT\nConnection: keep-alive\nExpires: Mon, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" 06:21:25 GMT\nCache-Control: max-age"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43200")]),s._v("\nContent-Encoding: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v("\n\ncss文件成功压缩\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -I -H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Accept-Encoding: gzip, deflate"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://www.slyar.com/blog/wp-includes/js/jquery/jquery.js"')]),s._v("\n\nHTTP/1.1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\nServer: nginx/1.0.15\nDate: Sun, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":21:38 GMT\nContent-Type: application/x-javascript\nLast-Modified: Thu, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":42:45 GMT\nConnection: keep-alive\nExpires: Mon, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" 06:21:38 GMT\nCache-Control: max-age"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43200")]),s._v("\nContent-Encoding: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v("\n\njs文件成功压缩\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -I -H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Accept-Encoding: gzip, deflate"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://www.slyar.com/blog/wp-content/uploads/2012/08/2012-08-23_203542.png"')]),s._v("\n\nHTTP/1.1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\nServer: nginx/1.0.15\nDate: Sun, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":22:45 GMT\nContent-Type: image/png\nLast-Modified: Thu, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":50:53 GMT\nConnection: keep-alive\nExpires: Tue, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" Sep "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":22:45 GMT\nCache-Control: max-age"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2592000")]),s._v("\nContent-Encoding: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v("\n\n图片成功压缩\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -I -H "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Accept-Encoding: gzip, deflate"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://www.slyar.com/blog/wp-content/plugins/wp-multicollinks/wp-multicollinks.css"')]),s._v("\n\nHTTP/1.1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\nServer: nginx/1.0.15\nDate: Sun, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":23:27 GMT\nContent-Type: text/css\nContent-Length: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("180")]),s._v("\nLast-Modified: Sat, 02 May "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2009")]),s._v(" 08:46:15 GMT\nConnection: keep-alive\nExpires: Mon, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" 06:23:27 GMT\nCache-Control: max-age"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43200")]),s._v("\nAccept-Ranges: bytes\n\n最后来个不到1K的文件，由于我的阈值是1K，所以没压缩\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);