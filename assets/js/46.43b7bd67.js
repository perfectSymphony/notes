(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{326:function(s,n,a){"use strict";a.r(n);var t=a(4),e=Object(t.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"nginx的gzip配置参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx的gzip配置参数"}},[s._v("#")]),s._v(" Nginx的gzip配置参数")]),s._v(" "),n("p",[s._v("首先浏览器请求某个 URL 地址，并在请求的头 (head) 中设置属性 accept-encoding 值为 gzip, deflate，表明浏览器支持 gzip 和 deflate 这两种压缩方式;"),n("br"),s._v("\nWEB 服务器接收到请求后判断浏览器是否支持压缩，如果支持就传送压缩后的响应内容，否则传送不经过压缩的内容;浏览器获取响应内容后，判断内容是否被压缩，如果是则解压缩，然后显示响应页面的内容。"),n("br"),s._v("\n　　在实际的应用中我们发现压缩的比率往往在 3 到 10 倍，也就是本来 50k 大小的页面，采用压缩后实际传输的内容大小只有 5 至 15k 大小，这可以大大节省服务器的网络带宽，同时如果应用程序的响应足够快时，网站的速度瓶颈就转到了网络的传输速度上，因此内容压缩后就可以大大的提升页面的浏览速度。")]),s._v(" "),n("h4",{attrs:{id:"配置启用gzip"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置启用gzip"}},[s._v("#")]),s._v(" 配置启用gzip")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v(" on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ngzip_min_length  5k"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ngzip_buffers     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" 16k"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#gzip_http_version 1.0;")]),s._v("\ngzip_comp_level "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ngzip_types       text/plain application/javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ngzip_vary on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# :wq保存退出，重新加载Nginx")]),s._v("\n\n/usr/local/nginx/sbin/nginx "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" reload\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h4",{attrs:{id:"gzip"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gzip"}},[s._v("#")]),s._v(" gzip")]),s._v(" "),n("p",[s._v("决定是否开启gzip模块\nparam:on|off\nexample:gzip on;")]),s._v(" "),n("h4",{attrs:{id:"gzip-buffers"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gzip-buffers"}},[s._v("#")]),s._v(" gzip_buffers")]),s._v(" "),n("p",[s._v("设置gzip申请内存的大小,其作用是按块大小的倍数申请内存空间\nparam1:int\nparam2:int(k) 后面单位是k\nexample: gzip_buffers 4 8k;")]),s._v(" "),n("h4",{attrs:{id:"gzip-comp-level"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gzip-comp-level"}},[s._v("#")]),s._v(" gzip_comp_level")]),s._v(" "),n("p",[s._v("设置gzip压缩等级，等级越底压缩速度越快文件压缩比越小，反之速度越慢文件压缩比越大\nparam:1-9\nexample:gzip_com_level 1;")]),s._v(" "),n("h4",{attrs:{id:"gzip-min-length"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gzip-min-length"}},[s._v("#")]),s._v(" gzip_min_length")]),s._v(" "),n("p",[s._v("当返回内容大于此值时才会使用gzip进行压缩,以K为单位,当值为0时，所有页面都进行压缩\nparam:int\nexample:gzip_min_length 1000;")]),s._v(" "),n("h4",{attrs:{id:"gzip-http-version"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gzip-http-version"}},[s._v("#")]),s._v(" gzip_http_version")]),s._v(" "),n("p",[s._v("用于识别http协议的版本，早期的浏览器不支持gzip压缩，用户会看到乱码，所以为了支持前期版本加了此选项,目前此项基本可以忽略\nparam: 1.0|1.1\nexample:gzip_http_version 1.0")]),s._v(" "),n("h4",{attrs:{id:"gzip-proxied"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gzip-proxied"}},[s._v("#")]),s._v(" gzip_proxied")]),s._v(" "),n("p",[s._v("Nginx做为反向代理的时候启用，\nparam:off|expired|no-cache|no-sotre|private|no_last_modified|no_etag|auth|any]\nexpample:gzip_proxied no-cache;\noff – 关闭所有的代理结果数据压缩\nexpired – 启用压缩，如果header中包含”Expires”头信息\nno-cache – 启用压缩，如果header中包含”Cache-Control:no-cache”头信息\nno-store – 启用压缩，如果header中包含”Cache-Control:no-store”头信息\nprivate – 启用压缩，如果header中包含”Cache-Control:private”头信息\nno_last_modified – 启用压缩，如果header中包含”Last_Modified”头信息\nno_etag – 启用压缩，如果header中包含“ETag”头信息\nauth – 启用压缩，如果header中包含“Authorization”头信息\nany – 无条件压缩所有结果数据")]),s._v(" "),n("h4",{attrs:{id:"gzip-types"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gzip-types"}},[s._v("#")]),s._v(" gzip_types")]),s._v(" "),n("p",[s._v("设置需要压缩的MIME类型,非设置值不进行压缩\nparam:text/html|application/x-javascript|text/css|application/xml\nexample:gzip_types text/html;")]),s._v(" "),n("h4",{attrs:{id:"demo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#demo"}},[s._v("#")]),s._v(" Demo")]),s._v(" "),n("p",[s._v("gzip on;\ngzip_min_length 1000;\ngzip_buffers 4 8k;\ngzip_types text/html application/x-javascript text/css application/xml;")]),s._v(" "),n("h4",{attrs:{id:"使用curl测试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用curl测试"}},[s._v("#")]),s._v(" 使用curl测试")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-I")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-H")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Accept-Encoding: gzip, deflate"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://www.slyar.com/blog/"')]),s._v("\n\nHTTP/1.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\nServer: nginx/1.0.15\nDate: Sun, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Aug "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":13:09 GMT\nContent-Type: text/html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("charset")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("UTF-8\nConnection: keep-alive\nX-Powered-By: PHP/5.2.17p1\nX-Pingback: http://www.slyar.com/blog/xmlrpc.php\nContent-Encoding: "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v("\n\n页面成功压缩\n\n \n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-I")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-H")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Accept-Encoding: gzip, deflate"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://www.slyar.com/blog/wp-content/plugins/photonic/include/css/photonic.css"')]),s._v("\n\nHTTP/1.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\nServer: nginx/1.0.15\nDate: Sun, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Aug "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":21:25 GMT\nContent-Type: text/css\nLast-Modified: Sun, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Aug "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":17:07 GMT\nConnection: keep-alive\nExpires: Mon, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" Aug "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" 06:21:25 GMT\nCache-Control: max-age"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("43200")]),s._v("\nContent-Encoding: "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v("\n\ncss文件成功压缩\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-I")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-H")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Accept-Encoding: gzip, deflate"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://www.slyar.com/blog/wp-includes/js/jquery/jquery.js"')]),s._v("\n\nHTTP/1.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\nServer: nginx/1.0.15\nDate: Sun, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Aug "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":21:38 GMT\nContent-Type: application/x-javascript\nLast-Modified: Thu, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" Jul "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":42:45 GMT\nConnection: keep-alive\nExpires: Mon, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" Aug "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" 06:21:38 GMT\nCache-Control: max-age"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("43200")]),s._v("\nContent-Encoding: "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v("\n\njs文件成功压缩\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-I")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-H")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Accept-Encoding: gzip, deflate"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://www.slyar.com/blog/wp-content/uploads/2012/08/2012-08-23_203542.png"')]),s._v("\n\nHTTP/1.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\nServer: nginx/1.0.15\nDate: Sun, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Aug "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":22:45 GMT\nContent-Type: image/png\nLast-Modified: Thu, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" Aug "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":50:53 GMT\nConnection: keep-alive\nExpires: Tue, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(" Sep "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":22:45 GMT\nCache-Control: max-age"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2592000")]),s._v("\nContent-Encoding: "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v("\n\n图片成功压缩\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-I")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-H")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Accept-Encoding: gzip, deflate"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://www.slyar.com/blog/wp-content/plugins/wp-multicollinks/wp-multicollinks.css"')]),s._v("\n\nHTTP/1.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\nServer: nginx/1.0.15\nDate: Sun, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Aug "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":23:27 GMT\nContent-Type: text/css\nContent-Length: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("180")]),s._v("\nLast-Modified: Sat, 02 May "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2009")]),s._v(" 08:46:15 GMT\nConnection: keep-alive\nExpires: Mon, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" Aug "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2012")]),s._v(" 06:23:27 GMT\nCache-Control: max-age"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("43200")]),s._v("\nAccept-Ranges: bytes\n\n最后来个不到1K的文件，由于我的阈值是1K，所以没压缩\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);