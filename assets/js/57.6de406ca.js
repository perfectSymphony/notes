(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{412:function(s,a,t){"use strict";t.r(a);var n=t(45),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"javascript清除缓存的几种方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#javascript清除缓存的几种方法"}},[s._v("#")]),s._v(" Javascript清除缓存的几种方法")]),s._v(" "),t("h4",{attrs:{id:"_1、meta方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、meta方法"}},[s._v("#")]),s._v(" 1、meta方法")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("//不缓存\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("META HTTP-EQUIV"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pragma"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CONTENT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no-cache"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("META HTTP-EQUIV"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Cache-Control"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CONTENT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no-cache, must-revalidate"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("META HTTP-EQUIV"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"expires"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CONTENT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"_2、清理form表单的临时缓存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、清理form表单的临时缓存"}},[s._v("#")]),s._v(" 2、清理form表单的临时缓存")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("body "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("onLoad")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"javascript:document.yourFormName.reset()"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_3、jquery-ajax清除浏览器缓存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、jquery-ajax清除浏览器缓存"}},[s._v("#")]),s._v(" 3、jquery ajax清除浏览器缓存")]),s._v(" "),t("h4",{attrs:{id:"方式一-用ajax请求服务器最新文件-并加上请求头if-modified-since和cache-control-如下"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方式一-用ajax请求服务器最新文件-并加上请求头if-modified-since和cache-control-如下"}},[s._v("#")]),s._v(" 方式一：用ajax请求服务器最新文件，并加上请求头If-Modified-Since和Cache-Control,如下:")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("  $.ajax"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n     url:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'www.haorooms.com'")]),s._v(",\n     dataType:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'json'")]),s._v(",\n     data:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n     beforeSend :function"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xmlHttp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n        xmlHttp.setRequestHeader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"If-Modified-Since"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n        xmlHttp.setRequestHeader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Cache-Control"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no-cache"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n     success:function"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("response"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         //操作\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n     async:false\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h4",{attrs:{id:"方法二-直接用cache-false"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法二-直接用cache-false"}},[s._v("#")]),s._v(" 方法二，直接用cache:false,")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("  $.ajax"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n     url:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'www.haorooms.com'")]),s._v(",\n     dataType:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'json'")]),s._v(",\n     data:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n     cache:false, \n     ifModified :true ,\n\n     success:function"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("response"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         //操作\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n     async:false\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h4",{attrs:{id:"方法三-用随机数-随机数也是避免缓存的一种很不错的方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法三-用随机数-随机数也是避免缓存的一种很不错的方法"}},[s._v("#")]),s._v(" 方法三：用随机数，随机数也是避免缓存的一种很不错的方法！")]),s._v(" "),t("blockquote",[t("p",[s._v('URL 参数后加上 "?ran=" + Math.random(); //当然这里参数 ran可以任意取了')])]),s._v(" "),t("h4",{attrs:{id:"方法四-用随机时间-和随机数一样。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法四-用随机时间-和随机数一样。"}},[s._v("#")]),s._v(" 方法四：用随机时间，和随机数一样。")]),s._v(" "),t("blockquote",[t("p",[s._v('在 URL 参数后加上 "?timestamp=" + new Date().getTime();')])]),s._v(" "),t("h4",{attrs:{id:"用php后端清理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用php后端清理"}},[s._v("#")]),s._v(" 用php后端清理")]),s._v(" "),t("blockquote",[t("p",[s._v('在服务端加 header("Cache-Control: no-cache, must-revalidate");等等(如php中)')])]),s._v(" "),t("h3",{attrs:{id:"微信浏览器自动清理缓存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#微信浏览器自动清理缓存"}},[s._v("#")]),s._v(" 微信浏览器自动清理缓存")]),s._v(" "),t("p",[s._v("根本的方式：给静态资源添加md5类型的版本号， 入口文件被缓存，首页是设置服务端的缓存机制(将nginx的缓存设置成{expires-1;}，设置成永远不缓存)")]),s._v(" "),t("p",[s._v("版本号有两种方式: "),t("br"),s._v("\na，传统的文件名后带参数的方式： index.js?v=20170705;"),t("br"),s._v("\nb，现在多用的md5文件名的方式： index-8a769sh7f9d.js;"),t("br")]),s._v(" "),t("p",[s._v("因为微信对于第一种方式，可能会直接忽略后面的hash值。"),t("br")]),s._v(" "),t("p",[s._v("微信缓存入口文件index.html(项目是单页应用)")])])}),[],!1,null,null,null);a.default=e.exports}}]);