(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{397:function(s,a,t){"use strict";t.r(a);var n=t(7),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"javascript清除缓存的几种方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javascript清除缓存的几种方法"}},[s._v("#")]),s._v(" Javascript清除缓存的几种方法")]),s._v(" "),a("h4",{attrs:{id:"_1、meta方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、meta方法"}},[s._v("#")]),s._v(" 1、meta方法")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("//不缓存\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("META HTTP-EQUIV"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pragma"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CONTENT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no-cache"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("META HTTP-EQUIV"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Cache-Control"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CONTENT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no-cache, must-revalidate"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("META HTTP-EQUIV"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"expires"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CONTENT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"_2、清理form表单的临时缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、清理form表单的临时缓存"}},[s._v("#")]),s._v(" 2、清理form表单的临时缓存")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("body "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("onLoad")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"javascript:document.yourFormName.reset()"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3、jquery-ajax清除浏览器缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、jquery-ajax清除浏览器缓存"}},[s._v("#")]),s._v(" 3、jquery ajax清除浏览器缓存")]),s._v(" "),a("h4",{attrs:{id:"方式一-用ajax请求服务器最新文件-并加上请求头if-modified-since和cache-control-如下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方式一-用ajax请求服务器最新文件-并加上请求头if-modified-since和cache-control-如下"}},[s._v("#")]),s._v(" 方式一：用ajax请求服务器最新文件，并加上请求头If-Modified-Since和Cache-Control,如下:")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("  $.ajax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n     url:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'www.haorooms.com'")]),s._v(",\n     dataType:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'json'")]),s._v(",\n     data:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n     beforeSend :function"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xmlHttp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n        xmlHttp.setRequestHeader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"If-Modified-Since"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n        xmlHttp.setRequestHeader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Cache-Control"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no-cache"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n     success:function"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         //操作\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n     async:false\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h4",{attrs:{id:"方法二-直接用cache-false"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法二-直接用cache-false"}},[s._v("#")]),s._v(" 方法二，直接用cache:false,")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("  $.ajax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n     url:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'www.haorooms.com'")]),s._v(",\n     dataType:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'json'")]),s._v(",\n     data:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n     cache:false, \n     ifModified :true ,\n\n     success:function"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         //操作\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n     async:false\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h4",{attrs:{id:"方法三-用随机数-随机数也是避免缓存的一种很不错的方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法三-用随机数-随机数也是避免缓存的一种很不错的方法"}},[s._v("#")]),s._v(" 方法三：用随机数，随机数也是避免缓存的一种很不错的方法！")]),s._v(" "),a("blockquote",[a("p",[s._v('URL 参数后加上 "?ran=" + Math.random(); //当然这里参数 ran可以任意取了')])]),s._v(" "),a("h4",{attrs:{id:"方法四-用随机时间-和随机数一样。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法四-用随机时间-和随机数一样。"}},[s._v("#")]),s._v(" 方法四：用随机时间，和随机数一样。")]),s._v(" "),a("blockquote",[a("p",[s._v('在 URL 参数后加上 "?timestamp=" + new Date().getTime();')])]),s._v(" "),a("h4",{attrs:{id:"用php后端清理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用php后端清理"}},[s._v("#")]),s._v(" 用php后端清理")]),s._v(" "),a("blockquote",[a("p",[s._v('在服务端加 header("Cache-Control: no-cache, must-revalidate");等等(如php中)')])]),s._v(" "),a("h3",{attrs:{id:"微信浏览器自动清理缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#微信浏览器自动清理缓存"}},[s._v("#")]),s._v(" 微信浏览器自动清理缓存")]),s._v(" "),a("p",[s._v("根本的方式：给静态资源添加md5类型的版本号， 入口文件被缓存，首页是设置服务端的缓存机制(将nginx的缓存设置成{expires-1;}，设置成永远不缓存)")]),s._v(" "),a("p",[s._v("版本号有两种方式: "),a("br"),s._v("\na，传统的文件名后带参数的方式： index.js?v=20170705;"),a("br"),s._v("\nb，现在多用的md5文件名的方式： index-8a769sh7f9d.js;"),a("br")]),s._v(" "),a("p",[s._v("因为微信对于第一种方式，可能会直接忽略后面的hash值。"),a("br")]),s._v(" "),a("p",[s._v("微信缓存入口文件index.html(项目是单页应用)")])])}),[],!1,null,null,null);a.default=e.exports}}]);